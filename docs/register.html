<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - SkillMatch AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
        * {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
          font-family: 'Inter', sans-serif;
        }

        body {
          background: radial-gradient(circle at top left, #111429, #050510);
          color: #f3f4f6;
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow-x: hidden;
          overflow-y: auto;
          position: relative;
          padding: 2rem;
        }

        body::before,
        body::after {
          content: "";
          position: absolute;
          width: 140vmax;
          height: 140vmax;
          border-radius: 50%;
          filter: blur(160px);
          opacity: 0.32;
          z-index: 0;
          animation: pulse 24s infinite alternate;
        }

        body::before {
          background: radial-gradient(circle, rgba(99,102,241,0.65) 0%, rgba(79,70,229,0.25) 60%, transparent 100%);
          top: -70vmax;
          left: -40vmax;
        }

        body::after {
          background: radial-gradient(circle, rgba(236,72,153,0.55) 0%, rgba(59,130,246,0.3) 55%, transparent 100%);
          bottom: -60vmax;
          right: -35vmax;
          animation-delay: 6s;
        }

        @keyframes pulse {
          0% { transform: scale(0.95) rotate(0deg); }
          100% { transform: scale(1.05) rotate(8deg); }
        }

        .shape {
          position: absolute;
          width: 220px;
          height: 220px;
          background: linear-gradient(140deg, rgba(99,102,241,0.35), rgba(14,165,233,0.15));
          border-radius: 32% 68% 63% 37% / 45% 32% 68% 55%;
          filter: blur(1px);
          z-index: 1;
          animation: float 18s ease-in-out infinite;
          top: 16%;
          right: 12%;
        }

        .shape.shape-2 {
          width: 160px;
          height: 160px;
          background: linear-gradient(145deg, rgba(236,72,153,0.35), rgba(147,197,253,0.1));
          top: 8%;
          left: 9%;
          animation-duration: 22s;
        }

        .shape.shape-3 {
          width: 180px;
          height: 180px;
          background: linear-gradient(145deg, rgba(34,197,94,0.28), rgba(99,102,241,0.18));
          bottom: 10%;
          left: 18%;
          animation-duration: 20s;
          animation-delay: 4s;
        }

        @keyframes float {
          0%, 100% { transform: translate3d(0, 0, 0) rotate(0deg); }
          50% { transform: translate3d(40px, -30px, 0) rotate(12deg); }
        }

        .container {
          position: relative;
          z-index: 2;
          width: 100%;
          max-width: 520px;
          padding: 3.2rem 3rem 2.6rem;
          border-radius: 1.75rem;
          background: rgba(18, 19, 37, 0.82);
          border: 1px solid rgba(99, 102, 241, 0.25);
          backdrop-filter: blur(14px);
          box-shadow: 0 28px 65px rgba(6, 11, 38, 0.65);
          animation: fadeIn 0.9s ease;
          display: grid;
          gap: 1.6rem;
        }

        header {
          display: grid;
          gap: 0.45rem;
        }

        header .tagline {
          color: #a5b4fc;
          font-size: 0.85rem;
          font-weight: 600;
          letter-spacing: 0.12rem;
          text-transform: uppercase;
        }

        header h1 {
          font-size: 2rem;
          font-weight: 700;
          color: #f8fafc;
        }

        header p {
          color: #cbd5e1;
          font-size: 1rem;
          max-width: 80%;
        }

        form {
          display: grid;
          gap: 1.1rem;
        }

        .field {
          display: flex;
          flex-direction: column;
          gap: 0.45rem;
          text-align: left;
        }

        label {
          font-size: 0.9rem;
          font-weight: 600;
          color: #cbd5e1;
        }

        input, select {
          width: 100%;
          padding: 0.9rem 1rem;
          border-radius: 12px;
          border: 1px solid rgba(148, 163, 184, 0.25);
          background: rgba(15, 23, 42, 0.65);
          color: #f8fafc;
          transition: border-color 0.2s ease, box-shadow 0.2s ease;
          outline: none;
        }

        input::placeholder {
          color: #94a3b8;
        }

        input:focus, select:focus {
          border-color: rgba(99, 102, 241, 0.7);
          box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
        }

        .helper {
          font-size: 0.78rem;
          color: #94a3b8;
        }

        .status {
          min-height: 1.1rem;
          font-size: 0.95rem;
          font-weight: 600;
          text-align: center;
        }

        .status.success { color: #22c55e; }
        .status.error { color: #ef4444; }

        .btn-primary {
          background: linear-gradient(100deg, #6366f1, #8b5cf6);
          color: #ffffff;
          padding: 0.95rem;
          border-radius: 14px;
          border: none;
          font-weight: 600;
          cursor: pointer;
          box-shadow: 0 16px 34px rgba(99, 102, 241, 0.45);
          transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
        }

        .btn-primary:hover {
          filter: brightness(1.07);
          box-shadow: 0 18px 40px rgba(99, 102, 241, 0.55);
          transform: translateY(-2px);
        }

        .btn-primary:disabled {
          opacity: 0.7;
          cursor: wait;
          transform: none;
          box-shadow: none;
        }

        .quick-links {
          display: flex;
          flex-wrap: wrap;
          gap: 0.75rem;
        }

        .link-button {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          gap: 0.25rem;
          padding: 0.75rem 1.1rem;
          border-radius: 0.75rem;
          border: 1px solid rgba(99, 102, 241, 0.4);
          color: #a5b4fc;
          text-decoration: none;
          font-weight: 600;
          font-size: 0.95rem;
          transition: background 0.25s ease, transform 0.25s ease, box-shadow 0.25s ease;
        }

        .link-button:hover {
          background: rgba(99, 102, 241, 0.18);
          transform: translateY(-2px);
          box-shadow: 0 10px 25px rgba(99, 102, 241, 0.25);
        }

        .link-button.secondary {
          border-color: rgba(59, 130, 246, 0.4);
          color: #bae6fd;
        }

        .link-button.secondary:hover {
          background: rgba(59, 130, 246, 0.18);
          box-shadow: 0 10px 25px rgba(59, 130, 246, 0.28);
        }

        .auth-links {
          display: flex;
          align-items: center;
          justify-content: space-between;
          color: #a5b4fc;
          font-size: 0.9rem;
        }

        .auth-links a {
          color: #8b5cf6;
          text-decoration: none;
          transition: color 0.3s ease;
        }

        .auth-links a:hover {
          text-decoration: underline;
          color: #c4b5fd;
        }

        footer {
          font-size: 0.8rem;
          color: rgba(226, 232, 240, 0.65);
          text-align: center;
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(12px); }
          to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 640px) {
          body {
            padding: 1.5rem 1.25rem;
            align-items: stretch;
          }
          .container {
            padding: 2.6rem 1.8rem 2.1rem;
            max-width: 100%;
          }
          header p {
            max-width: 100%;
          }
          .quick-links {
            justify-content: center;
          }
          .auth-links {
            flex-direction: column;
            gap: 0.6rem;
            align-items: flex-start;
          }
        }
    </style>
</head>
<body>
<div class="shape"></div>
<div class="shape shape-2"></div>
<div class="shape shape-3"></div>

<main class="container">
    <header>
        <div class="tagline">Join the community</div>
        <h1>Create your account</h1>
        <p>Unlock personalized job matches, smart recommendations, and seamless collaboration tools.</p>
    </header>

    <form id="regForm" novalidate>
        <div class="field">
            <label for="firstName">First Name</label>
            <input id="firstName"
                   name="firstName"
                   type="text"
                   placeholder="Enter your first name"
                   inputmode="text"
                   pattern="^[A-Za-z\\s'-]+$"
                   title="Only letters, spaces, apostrophes, and hyphens."
                   required>
            <div class="helper">Letters only (spaces, apostrophes, and hyphens allowed).</div>
        </div>

        <div class="field">
            <label for="lastName">Last Name</label>
            <input id="lastName"
                   name="lastName"
                   type="text"
                   placeholder="Enter your last name"
                   inputmode="text"
                   pattern="^[A-Za-z\\s'-]+$"
                   title="Only letters, spaces, apostrophes, and hyphens."
                   required>
            <div class="helper">Letters only (spaces, apostrophes, and hyphens allowed).</div>
        </div>

        <div class="field">
            <label for="email">Email</label>
            <input id="email"
                   name="email"
                   type="email"
                   autocomplete="email"
                   placeholder="you@example.com"
                   required>
        </div>

        <div class="field">
            <label for="phone">Phone (optional)</label>
            <input id="phone"
                   name="phone"
                   type="tel"
                   inputmode="tel"
                   placeholder="+1234567890">
            <div class="helper">Include country code if available. Digits only.</div>
        </div>

        <div class="field">
            <label for="password">Password</label>
            <input id="password"
                   name="password"
                   type="password"
                   placeholder="Create a password"
                   minlength="8"
                   required>
            <div class="helper">Minimum 8 characters.</div>
        </div>

        <div class="field">
            <label for="userType">User Type</label>
            <select id="userType" name="userType" required>
                <option value="" disabled selected>Select user type</option>
                <option value="CANDIDATE">Candidate</option>
                <option value="RECRUITER">Recruiter</option>
                <option value="ADMIN">Admin</option>
            </select>
        </div>

        <div id="msg" class="status" role="alert"></div>

        <button id="submitBtn" type="submit" class="btn-primary">Register</button>
    </form>

    <div class="quick-links">
        <a class="link-button" href="/login.html">Already have an account?</a>
        <a class="link-button secondary" href="/index.html">Go to home</a>
    </div>

    <div class="auth-links">
        <span>Need help? <a href="/contact.html">Contact support</a></span>
        <span><a href="/">← Back home</a></span>
    </div>

    <footer>SkillMatch AI — Empowering careers with intelligent insights</footer>
</main>

<script src="/js/api.js"></script>
<script>
  const form = document.getElementById('regForm');
  const statusEl = document.getElementById('msg');
  const submitBtn = document.getElementById('submitBtn');

  const enforceLettersOnly = (id) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener('input', () => {
      el.value = el.value.replace(/[^A-Za-z\s'-]/g, '');
    });
  };

  enforceLettersOnly('firstName');
  enforceLettersOnly('lastName');

  const setStatus = (message, type) => {
    statusEl.textContent = message || '';
    statusEl.className = type ? `status ${type}` : 'status';
  };

  const resetStatus = () => setStatus('', '');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    resetStatus();

    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    const payload = {
      firstName: document.getElementById('firstName').value.trim(),
      lastName: document.getElementById('lastName').value.trim(),
      email: document.getElementById('email').value.trim(),
      password: document.getElementById('password').value,
      userType: document.getElementById('userType').value
    };

    const phone = document.getElementById('phone').value.trim();
    if (phone) {
      payload.phone = phone.replace(/\s+/g, '');
    }

    submitBtn.disabled = true;
    setStatus('Creating account...', 'success');

    try {
      await window.Api.register(payload);
      setStatus('Yes! You can now log in.', 'success');
      window.Api.logout();
      setTimeout(() => {
        window.location.href = '/login.html';
      }, 1500);
    } catch (err) {
      console.error('Registration failed', err);
      const message = err?.message || '❌ Registration failed. Please try again.';
      setStatus(message, 'error');
    } finally {
      submitBtn.disabled = false;
    }
  });
</script>
</body>
</html>

